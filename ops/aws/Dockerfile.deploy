FROM ubuntu:18.04

RUN mkdir -p /opt/app
WORKDIR /opt/app

RUN apt-get upgrade -y && \
    apt-get update -y && \
    apt-get install -y \
      ca-certificates \
      libgmp-dev \
      libpq-dev

ADD public /opt/app/public
ADD zoomhub /opt/app

EXPOSE 5000

ENTRYPOINT ["sh", "-c", \
  "PGHOST=$RDS_HOSTNAME PGPORT=$RDS_PORT PGDATABASE=$RDS_DB_NAME PGUSER=$RDS_USERNAME PGPASSWORD=$RDS_PASSWORD /opt/app/zoomhub"]
